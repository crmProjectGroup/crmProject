<cc:page type="normal" style="standard" showSidebar="false" showHeader="true" />
<cc!>
/*
description:新预算系统
version: 1.0
date:20201217
author:tom
log:
*/

/**
* 将ISO-8859-1编码格式的字符串转码为UTF-8
*
* @param parameterValue
* @return
* @throws UnsupportedEncodingException
*/
private static String encodeParameters(String parameterValue)
throws UnsupportedEncodingException {
	if (parameterValue != null && parameterValue.length() > 0) {
		byte[] iso = parameterValue.getBytes("ISO-8859-1");
		if (parameterValue.equals(new String(iso, "ISO-8859-1"))) {
			parameterValue = new String(iso, "UTF-8");
			return parameterValue;
		}
	}
	return parameterValue;
}
</cc>

<cc>
	CCService cs = new CCService(userInfo); 
	String uid = userInfo.getUserId();//当前登录用户id 
	List<CCObject> ccuserl = cs.cqlQuery("ccuser","SELECT loginname as name FROM ccuser WHERE id = '"+uid+"'"); //登录人的账号
	String userName =ccuserl.get(0).get("name")==null?"":ccuserl.get(0).get("name")+""; 

    
	
</cc>

<html>
  <script src="//unpkg.com/vue/dist/vue.js"></script>
  <script src="https://unpkg.com/vue-router/dist/vue-router.js"></script>
  <script src="//unpkg.com/element-ui@2.13.2/lib/index.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/element-ui@2.13.2/lib/theme-chalk/index.css"/>
  <script src="https://cdn.jsdelivr.net/npm/axios@0.19.0/dist/axios.min.js"></script>
  <style type="text/css">
    
  </style>

  <div id="app">
    <el-container>
        <el-header>
        </el-header> 
        <el-main>
            <el-select v-model="selvalue" placeholder="请选择">
                <el-option
                  v-for="item in options"
                  :key="item.value"
                  :label="item.label"
                  :value="item.value">
                </el-option>
            </el-select>

            <el-tabs v-model="activeName" type="card" @tab-click="handleClickTab">
                <el-tab-pane label="项目预算" name="monthkh">
                    <h1>项目整体预算表</h1>
                    <el-button type="primary"  @click="addxmys()">新增</el-button>
                    <!-- <el-alert
                        :title="alerttxt"
                        type="error"
                        :v-show="alertshow">
                    </el-alert> -->
                    <template v-if="showJl">
                        <el-table
                            ref="filterTable"
                            :data="tableData1"
                            style="width: 100%"
                            height="700"
                            v-loading="loading_t1"
                            :span-method="arraySpanMethod"
                            border>
                            <el-table-column
                                prop="pjnm"
                                label="项目"
                                width="100">
                            </el-table-column>
                            <el-table-column
                                prop="type"
                                label="项目类型"
                                width="100">
                            </el-table-column>
                            <el-table-column
                                prop="syhl"
                                label="剩余货值"
                                width="80">
                            </el-table-column>
                            <el-table-column
                                prop="valuetype"
                                label="类型"
                                width="80">
                            </el-table-column>
                                <el-table-column
                                prop="ly"
                                label="来源"
                                width="80">
                            </el-table-column>
                            <el-table-column
                                prop="cjzmj"
                                label="成交总面积"
                                width="60">
                            </el-table-column>
                            <el-table-column
                                prop="cjbl"
                                label="成交比例"
                                width="60">
                            </el-table-column>
                            <el-table-column
                                prop="cjmj"
                                label="成交面积"
                                width="60">
                            </el-table-column>
                            <el-table-column
                                prop="dj"
                                label="单价"
                                width="60">
                            </el-table-column>
                            <el-table-column
                                prop="fl"
                                label="费率"
                                width="60">
                            </el-table-column>
                            <el-table-column
                                prop="cs"
                                label="创收"
                                width="60">
                            </el-table-column>
                            <el-table-column
                                prop="hj"
                                label="合计"
                                width="60">
                            </el-table-column>
                            <el-table-column
                                prop="bz"
                                label="备注"
                                width="60">
                            </el-table-column>
                            <el-table-column
                              label="操作"
                              width="100">
                              <template slot-scope="scope">
                                <el-button type="text" size="small" @click="editys(scope.row)">编辑</el-button>
                              </template>
                            </el-table-column>
                        </el-table>
                    </template>
                    <el-dialog title="新增项目预算" :visible.sync="dialogFormVisible_addys">
                        <el-form :model="form_ztys">
                            <el-form-item label="项目名称">
                                <el-select v-model="form_addys.pjid" placeholder="请选择项目">
                                    <el-option 
                                        v-for="item in pjlist"
                                        :key="item.id"
                                        :label="item.name"
                                        :value="item.id">
                                    </el-option>
                                </el-select>
                            </el-form-item>
                            <el-form-item label="剩余货量">
                                <el-input v-model="form_addys.syhl"></el-input>
                            </el-form-item>
                            <el-form-item label="均价">
                                <el-input v-model="form_addys.jj"></el-input>
                            </el-form-item>
                            <el-form-item label="正常费率">
                                <el-input v-model="form_addys.smfl"></el-input>
                            </el-form-item>
                            <el-form-item label="渠道费率">
                                <el-input v-model="form_addys.qdfl"></el-input>
                            </el-form-item>
                        </el-form>
                        <div slot="footer" class="dialog-footer">
                          <el-button @click="dialogFormVisible_addys = false">取 消</el-button>
                          <el-button type="primary" @click="addxmztys_close()">确 定</el-button>
                        </div>
                    </el-dialog>
                    <el-dialog title="项目预算整体编辑" :visible.sync="dialogFormVisible_ztys">
                        <el-form :model="form_ztys">
                            <el-form-item>
                                <el-col :span="12" :gutter="20">
                                    <div class="sub-title">项目名称</div>
                                    <el-input v-model="form_ztys.pjnm" autocomplete="off" disabled></el-input>
                                </el-col>
                                <el-col :span="12" :gutter="20">
                                    <div class="sub-title">剩余货量</div>
                                    <el-input v-model="form_ztys.syhl" autocomplete="off" disabled></el-input>
                                </el-col>
                            </el-form-item>
                            <span>理想值</span>
                            <el-form-item>
                                <el-col :span="12" :gutter="20">
                                    <div class="sub-title">成交总面积</div>
                                    <el-input v-model="form_ztys.cjzmj_lx" autocomplete="off" ><template slot="append">m²</template></el-input>
                                    <div class="sub-title">渠道比例</div>
                                    <el-input v-model="form_ztys.cjbl_lxqd" autocomplete="off" ><template slot="append">%</template></el-input>
                                    <div class="sub-title">渠道成交面积</div>
                                    <el-input v-model="form_ztys.cjmj_lxqd" autocomplete="off" disabled><template slot="append">m²</template></el-input>
                                    <div class="sub-title">渠道创收</div>
                                    <el-input v-model="form_ztys.cs_lxqd" autocomplete="off" disabled><template slot="append">元</template></el-input>
                                </el-col>
                                <el-col :span="12" :gutter="20">
                                    <div class="sub-title">创收合计</div>
                                    <el-input v-model="form_ztys.cs_lxhj" autocomplete="off" disabled><template slot="append">元</template></el-input>
                                    <div class="sub-title">自然上门比例</div>
                                    <el-input v-model="form_ztys.cjbl_lxsm" autocomplete="off" disabled><template slot="append">%</template></el-input>
                                    <div class="sub-title">自然上门成交面积</div>
                                    <el-input v-model="form_ztys.cjmj_lxsm" autocomplete="off" disabled><template slot="append">m²</template></el-input>
                                    <div class="sub-title">上门创收</div>
                                    <el-input v-model="form_ztys.cs_lxsm" autocomplete="off" disabled><template slot="append">元</template></el-input>
                                </el-col>
                            </el-form-item>
                            
                            <el-divider></el-divider>

                            <span>正常值</span>
                            <el-form-item>
                                <el-col :span="12" :gutter="20">
                                    <div class="sub-title">成交总面积</div>
                                    <el-input v-model="form_ztys.cjzmj_zc" autocomplete="off" ><template slot="append">m²</template></el-input>
                                    <div class="sub-title">渠道比例</div>
                                    <el-input v-model="form_ztys.cjbl_zcqd" autocomplete="off" ><template slot="append">%</template></el-input>
                                    <div class="sub-title">渠道成交面积</div>
                                    <el-input v-model="form_ztys.cjmj_zcqd" autocomplete="off" disabled><template slot="append">m²</template></el-input>
                                    <div class="sub-title">渠道创收</div>
                                    <el-input v-model="form_ztys.cs_zcqd" autocomplete="off" disabled><template slot="append">元</template></el-input>
                                </el-col>
                                <el-col :span="12" :gutter="20">
                                    <div class="sub-title">创收合计</div>
                                    <el-input v-model="form_ztys.cs_zchj" autocomplete="off" disabled><template slot="append">元</template></el-input>
                                    <div class="sub-title">自然上门比例</div>
                                    <el-input v-model="form_ztys.cjbl_zcsm" autocomplete="off" disabled><template slot="append">%</template></el-input>
                                    <div class="sub-title">自然上门成交面积</div>
                                    <el-input v-model="form_ztys.cjmj_zcsm" autocomplete="off" disabled><template slot="append">m²</template></el-input>
                                    <div class="sub-title">上门创收</div>
                                    <el-input v-model="form_ztys.cs_zcsm" autocomplete="off" disabled><template slot="append">元</template></el-input>
                                </el-col>
                            </el-form-item>

                            <el-divider></el-divider>

                            <span>保守值</span>
                            <el-form-item>
                                <el-col :span="12" :gutter="20">
                                    <div class="sub-title">成交总面积</div>
                                    <el-input v-model="form_ztys.cjzmj_bs" autocomplete="off" ><template slot="append">m²</template></el-input>
                                    <div class="sub-title">渠道比例</div>
                                    <el-input v-model="form_ztys.cjbl_bsqd" autocomplete="off" ><template slot="append">%</template></el-input>
                                    <div class="sub-title">渠道成交面积</div>
                                    <el-input v-model="form_ztys.cjmj_bsqd" autocomplete="off" disabled><template slot="append">m²</template></el-input>
                                    <div class="sub-title">渠道创收</div>
                                    <el-input v-model="form_ztys.cs_bsqd" autocomplete="off" disabled><template slot="append">元</template></el-input>
                                </el-col>
                                <el-col :span="12" :gutter="20">
                                    <div class="sub-title">创收合计</div>
                                    <el-input v-model="form_ztys.cs_bshj" autocomplete="off" disabled><template slot="append">元</template></el-input>
                                    <div class="sub-title">自然上门比例</div>
                                    <el-input v-model="form_ztys.cjbl_bssm" autocomplete="off" disabled><template slot="append">%</template></el-input>
                                    <div class="sub-title">自然上门成交面积</div>
                                    <el-input v-model="form_ztys.cjmj_bssm" autocomplete="off" disabled><template slot="append">m²</template></el-input>
                                    <div class="sub-title">上门创收</div>
                                    <el-input v-model="form_ztys.cs_bssm" autocomplete="off" disabled><template slot="append">元</template></el-input>
                                </el-col>
                            </el-form-item>
                        </el-form>
                        <div slot="footer" class="dialog-footer">
                          <el-button @click="dialogFormVisible_ztys = false">取 消</el-button>
                          <el-button type="primary" @click="updxmztys()">确 定</el-button>
                        </div>
                    </el-dialog>
                    <el-divider></el-divider>
                    <h1>团队创收目标（理想值）---团队考核值</h1>
                    <template v-if="showJl">
                        <el-table
                            ref="monthsysTable"
                            :data="tableData2"
                            style="width: 100%"
                            height="700"
                            :span-method="arraySpanMethod2"
                            border>
                            <el-table-column
                                prop="pjnm"
                                label="项目"
                                width="100">
                            </el-table-column>
                            <el-table-column
                                prop="type"
                                label="类型"
                                width="60">
                            </el-table-column>
                            <el-table-column
                                prop="value1"
                                label="1月"
                                width="60">
                            </el-table-column>
                            <el-table-column
                                prop="value2"
                                label="2月"
                                width="60">
                            </el-table-column>
                                <el-table-column
                                prop="value3"
                                label="3月"
                                width="60">
                            </el-table-column>
                            <el-table-column
                                prop="value4"
                                label="4月"
                                width="60">
                            </el-table-column>
                            <el-table-column
                                prop="value5"
                                label="5月"
                                width="60">
                            </el-table-column>
                            <el-table-column
                                prop="value6"
                                label="6月"
                                width="60">
                            </el-table-column>
                            <el-table-column
                                prop="value7"
                                label="7月"
                                width="60">
                            </el-table-column>
                            <el-table-column
                                prop="value8"
                                label="8月"
                                width="60">
                            </el-table-column>
                            <el-table-column
                                prop="value9"
                                label="9月"
                                width="60">
                            </el-table-column>
                            <el-table-column
                                prop="value10"
                                label="10月"
                                width="60">
                            </el-table-column>
                            <el-table-column
                                prop="value11"
                                label="11月"
                                width="60">
                            </el-table-column>
                            <el-table-column
                                prop="value12"
                                label="12月"
                                width="60">
                            </el-table-column>
                            <el-table-column
                                prop="valuetot"
                                label="合计"
                                width="60">
                            </el-table-column>
                            <el-table-column
                              label="操作"
                              width="100">
                              <template slot-scope="scope">
                                <el-button type="text" size="small" @click="ins_edtyfys(scope.row,'lx')">编辑</el-button>
                              </template>
                            </el-table-column>
                        </el-table>
                    </template>
                    <el-dialog title="项目每月预算编辑" :visible.sync="dialogFormVisible_yfys">
                        <el-form :model="form_yfys">
                            <el-form-item>
                                <el-col :span="12" :gutter="20">
                                    <div class="sub-title">项目名称</div>
                                    <el-input v-model="form_yfys.pjnm" autocomplete="off" disabled></el-input>
                                </el-col>
                                <el-col :span="12" :gutter="20">
                                    <div class="sub-title">成交总面积</div>
                                    <el-input v-model="form_yfys.cjzmj" autocomplete="off" disabled></el-input>
                                </el-col>
                            </el-form-item>
                            <!-- <span>理想值</span> -->
                            <el-form-item>
                                <el-col :span="12" :gutter="20">
                                    <div class="sub-title">面积</div>
                                    
                                    <el-input v-model="form_yfys.mj1" autocomplete="off" ><template slot="prepend">1月</template><template slot="append">m²</template></el-input>
                                    
                                    <el-input v-model="form_yfys.mj2" autocomplete="off" ><template slot="prepend">2月</template><template slot="append">m²</template></el-input>
                                    
                                    <el-input v-model="form_yfys.mj3" autocomplete="off" ><template slot="prepend">3月</template><template slot="append">m²</template></el-input>
                                    
                                    <el-input v-model="form_yfys.mj4" autocomplete="off" ><template slot="prepend">4月</template><template slot="append">m²</template></el-input>
                                    <el-input v-model="form_yfys.mj5" autocomplete="off" ><template slot="prepend">5月</template><template slot="append">m²</template></el-input>
                                    <el-input v-model="form_yfys.mj6" autocomplete="off" ><template slot="prepend">6月</template><template slot="append">m²</template></el-input>
                                    <el-input v-model="form_yfys.mj7" autocomplete="off" ><template slot="prepend">7月</template><template slot="append">m²</template></el-input>
                                    <el-input v-model="form_yfys.mj8" autocomplete="off" ><template slot="prepend">8月</template><template slot="append">m²</template></el-input>
                                    <el-input v-model="form_yfys.mj9" autocomplete="off" ><template slot="prepend">9月</template><template slot="append">m²</template></el-input>
                                    <el-input v-model="form_yfys.mj10" autocomplete="off" ><template slot="prepend">10月</template><template slot="append">m²</template></el-input>
                                    <el-input v-model="form_yfys.mj11" autocomplete="off" ><template slot="prepend">11月</template><template slot="append">m²</template></el-input>
                                    <el-input v-model="form_yfys.mj12" autocomplete="off" ><template slot="prepend">12月</template><template slot="append">m²</template></el-input>
                                    <el-input v-model="form_yfys.mjhj" autocomplete="off" disabled><template slot="prepend">合计</template><template slot="append">m²</template></el-input>

                                </el-col>
                                <el-col :span="12" :gutter="20">
                                    <div class="sub-title">创收</div>
                                    <el-input v-model="form_yfys.cs1" autocomplete="off" disabled><template slot="append">元</template></el-input>
                                    
                                    <el-input v-model="form_yfys.cs2" autocomplete="off" disabled><template slot="append">元</template></el-input>
                                    
                                    <el-input v-model="form_yfys.cs3" autocomplete="off" disabled><template slot="append">元</template></el-input>
                                    
                                    <el-input v-model="form_yfys.cs4" autocomplete="off" disabled><template slot="append">元</template></el-input>
                                    <el-input v-model="form_yfys.cs5" autocomplete="off" disabled><template slot="append">元</template></el-input>
                                    <el-input v-model="form_yfys.cs6" autocomplete="off" disabled><template slot="append">元</template></el-input>
                                    <el-input v-model="form_yfys.cs7" autocomplete="off" disabled><template slot="append">元</template></el-input>
                                    <el-input v-model="form_yfys.cs8" autocomplete="off" disabled><template slot="append">元</template></el-input>
                                    <el-input v-model="form_yfys.cs9" autocomplete="off" disabled><template slot="append">元</template></el-input>
                                    <el-input v-model="form_yfys.cs10" autocomplete="off" disabled><template slot="append">元</template></el-input>
                                    <el-input v-model="form_yfys.cs11" autocomplete="off" disabled><template slot="append">元</template></el-input>
                                    <el-input v-model="form_yfys.cs12" autocomplete="off" disabled><template slot="append">元</template></el-input>
                                    <el-input v-model="form_yfys.cshj" autocomplete="off" disabled><template slot="append">元</template></el-input>
                                </el-col>
                            </el-form-item>
                            
                            <el-divider></el-divider>

                            
                        </el-form>
                        <div slot="footer" class="dialog-footer">
                          <el-button @click="dialogFormVisible_yfys = false">取 消</el-button>
                          <el-button type="primary" @click="updxmyfys()">确 定</el-button>
                        </div>
                    </el-dialog>
                    <el-divider></el-divider>
                    <h1>公司创收目标（正常值）/公司回款值---项目经理考核值</h1>
                    <template v-if="showJl">
                        <el-table
                            ref="monthsysTable"
                            :data="tableData3"
                            style="width: 100%"
                            height="700"
                            :span-method="arraySpanMethod2"
                            border>
                            <el-table-column
                                prop="pjnm"
                                label="项目"
                                width="100">
                            </el-table-column>
                            <el-table-column
                                prop="type"
                                label="类型"
                                width="60">
                            </el-table-column>
                            <el-table-column
                                prop="value1"
                                label="1月"
                                width="60">
                            </el-table-column>
                            <el-table-column
                                prop="value2"
                                label="2月"
                                width="60">
                            </el-table-column>
                                <el-table-column
                                prop="value3"
                                label="3月"
                                width="60">
                            </el-table-column>
                            <el-table-column
                                prop="value4"
                                label="4月"
                                width="60">
                            </el-table-column>
                            <el-table-column
                                prop="value5"
                                label="5月"
                                width="60">
                            </el-table-column>
                            <el-table-column
                                prop="value6"
                                label="6月"
                                width="60">
                            </el-table-column>
                            <el-table-column
                                prop="value7"
                                label="7月"
                                width="60">
                            </el-table-column>
                            <el-table-column
                                prop="value8"
                                label="8月"
                                width="60">
                            </el-table-column>
                            <el-table-column
                                prop="value9"
                                label="9月"
                                width="60">
                            </el-table-column>
                            <el-table-column
                                prop="value10"
                                label="10月"
                                width="60">
                            </el-table-column>
                            <el-table-column
                                prop="value11"
                                label="11月"
                                width="60">
                            </el-table-column>
                            <el-table-column
                                prop="value12"
                                label="12月"
                                width="60">
                            </el-table-column>
                            <el-table-column
                                prop="valuetot"
                                label="合计"
                                width="60">
                            </el-table-column>
                            <el-table-column
                              label="操作"
                              width="100">
                              <template slot-scope="scope">
                                <el-button type="text" size="small" @click="ins_edtyfys(scope.row,'zc')">编辑</el-button>
                              </template>
                            </el-table-column>
                        </el-table>
                    </template>

                </el-tab-pane>
                <el-tab-pane label="代理部回款表" name="dlbhkb">
                    <template v-if="showJl">
                        <el-table
                            ref="dlbhkTable"
                            :data="tableData4"
                            style="width: 100%"
                            height="700"
                            show-summary=true
                            border>
                            <el-table-column
                                prop="pjnm"
                                label="项目"
                                width="100">
                            </el-table-column>
                            <el-table-column label="汇总">
                                <el-table-column
                                    prop="yshj"
                                    label="预算"
                                    width="80">
                                </el-table-column>
                                <el-table-column
                                    prop="sjhj"
                                    label="实际"
                                    width="80">
                                </el-table-column>
                            </el-table-column>
                            <!-- <el-table-column
                                prop="nkhe"
                                label="年回款总额"
                                width="100">
                            </el-table-column> -->
                            <el-table-column label="一月">
                                <el-table-column
                                    prop="ys1"
                                    label="预算"
                                    width="80">
                                </el-table-column>
                                <el-table-column
                                    prop="sj1"
                                    label="实际"
                                    width="80">
                                </el-table-column>
                            </el-table-column>
                            <el-table-column label="二月">
                                <el-table-column
                                    prop="ys2"
                                    label="预算"
                                    width="80">
                                </el-table-column>
                                <el-table-column
                                    prop="sj2"
                                    label="实际"
                                    width="80">
                                </el-table-column>
                            </el-table-column>
                            <el-table-column label="三月">
                                <el-table-column
                                    prop="ys3"
                                    label="预算"
                                    width="80">
                                </el-table-column>
                                <el-table-column
                                    prop="sj3"
                                    label="实际"
                                    width="80">
                                </el-table-column>
                            </el-table-column>
                            <el-table-column label="四月">
                                <el-table-column
                                    prop="ys4"
                                    label="预算"
                                    width="80">
                                </el-table-column>
                                <el-table-column
                                    prop="sj4"
                                    label="实际"
                                    width="80">
                                </el-table-column>
                            </el-table-column>
                            <el-table-column label="五月">
                                <el-table-column
                                    prop="ys5"
                                    label="预算"
                                    width="80">
                                </el-table-column>
                                <el-table-column
                                    prop="sj5"
                                    label="实际"
                                    width="80">
                                </el-table-column>
                            </el-table-column>
                            <el-table-column label="六月">
                                <el-table-column
                                    prop="ys6"
                                    label="预算"
                                    width="80">
                                </el-table-column>
                                <el-table-column
                                    prop="sj6"
                                    label="实际"
                                    width="80">
                                </el-table-column>
                            </el-table-column>
                            <el-table-column label="七月">
                                <el-table-column
                                    prop="ys7"
                                    label="预算"
                                    width="80">
                                </el-table-column>
                                <el-table-column
                                    prop="sj7"
                                    label="实际"
                                    width="80">
                                </el-table-column>
                            </el-table-column>
                            <el-table-column label="八月">
                                <el-table-column
                                    prop="ys8"
                                    label="预算"
                                    width="80">
                                </el-table-column>
                                <el-table-column
                                    prop="sj8"
                                    label="实际"
                                    width="80">
                                </el-table-column>
                            </el-table-column>
                            <el-table-column label="九月">
                                <el-table-column
                                    prop="ys9"
                                    label="预算"
                                    width="80">
                                </el-table-column>
                                <el-table-column
                                    prop="sj9"
                                    label="实际"
                                    width="80">
                                </el-table-column>
                            </el-table-column>
                            <el-table-column label="十月">
                                <el-table-column
                                    prop="ys10"
                                    label="预算"
                                    width="80">
                                </el-table-column>
                                <el-table-column
                                    prop="sj10"
                                    label="实际"
                                    width="80">
                                </el-table-column>
                            </el-table-column>
                            <el-table-column label="十一月">
                                <el-table-column
                                    prop="ys11"
                                    label="预算"
                                    width="80">
                                </el-table-column>
                                <el-table-column
                                    prop="sj11"
                                    label="实际"
                                    width="80">
                                </el-table-column>
                            </el-table-column>
                            <el-table-column label="十二月">
                                <el-table-column
                                    prop="ys12"
                                    label="预算"
                                    width="80">
                                </el-table-column>
                                <el-table-column
                                    prop="sj12"
                                    label="实际"
                                    width="80">
                                </el-table-column>
                            </el-table-column>
                            
                            
                            
                        </el-table>
                    </template>
                </el-tab-pane>
                
            <el-tabs>
        </el-main>
      </el-container>
      <br />
  </div>


    <script>
        var VM = new Vue({
            el: "#app",
                data: {
                    options: [{
                      value: '2020',
                      label: '2020'
                    }, {
                      value: '2021',
                      label: '2021'
                    }],
                    selvalue: '',
                    tableData1: null,
                    loading_t1:true,
                    showJl:true,
                    activeName:'monthkh',
                    loading_jd:true,
                    tableData_jd:null,
                    dialogFormVisible_addys: false, 
                    form_addys:{
                        pjid:'',
                        pjnm:'',
                        syhl:0,
                        jj:0, 
                        qdfl:0, 
                        smfl:0,
                    },
                    dialogFormVisible_ztys: false, 
                    form_ztys:{
                        pjnm:'',
                        syhl:'',
                        jj:0, 
                        qdfl:0, 
                        smfl:0,
                        cjzmj_lx:'',
                        cjbl_lxqd:'',
                        cjbl_lxsm:'',
                        cjmj_lxqd:'',
                        cjmj_lxsm:'',
                        cs_lxqd:'',
                        cs_lxsm:'',
                        cs_lxhj:'', 
                        cjzmj_zc:'',
                        cjbl_zcqd:'',
                        cjbl_zcsm:'',
                        cjmj_zcqd:'',
                        cjmj_zcsm:'',
                        cs_zcqd:'',
                        cs_zcsm:'',
                        cs_zchj:'',
                        cjzmj_bs:'',
                        cjbl_bsqd:'',
                        cjbl_bssm:'',
                        cjmj_bsqd:'',
                        cjmj_bssm:'',
                        cs_bsqd:'',
                        cs_bssm:'',
                        cs_bshj:'',
                    },
                    formLabelWidth: '120px',
                    pjlist:null,
                    bmysid:'',
                    tableData2:null,
                    loading_t2:true,
                    tableData3:null,
                    loading_t2:true,
                    dialogFormVisible_yfys:false,
                    form_yfys:{
                        xmysid:'',
                        pjnm:'',
                        cjzmj:0,
                        cjbl_qd:0,
                        cjbl_sm:0,
                        smfl:0,
                        qdfl:0,
                        jj:0,
                        mj1:0,
                        mj2:0,
                        mj3:0,
                        mj4:0,
                        mj5:0,
                        mj6:0,
                        mj7:0,
                        mj8:0,
                        mj9:0,
                        mj10:0,
                        mj11:0,
                        mj12:0,
                        mjhj:0,
                        cs1:0,
                        cs2:0,
                        cs3:0,
                        cs4:0,
                        cs5:0,
                        cs6:0,
                        cs7:0,
                        cs8:0,
                        cs9:0,
                        cs10:0,
                        cs11:0,
                        cs12:0,
                        cshj:0,
                    },
                    valtype:'',
                    tableData4:null,
                    loading_t4:false,
                 },
                watch: {
                    cjbl_lxqd(newValue, oldValue) {
                        //校验必须是数字
                        //var reg = new RegExp("^[0-9]*$");

                        this.form_ztys.cjbl_lxqd = newValue;
                        this.form_ztys.cjbl_lxsm = 100 - newValue;
                        this.form_ztys.cjmj_lxqd = this.form_ztys.cjzmj_lx * this.form_ztys.cjbl_lxqd / 100;
                        this.form_ztys.cjmj_lxsm = this.form_ztys.cjzmj_lx - this.form_ztys.cjmj_lxqd;
                        this.form_ztys.cs_lxqd = this.form_ztys.cjmj_lxqd * this.form_ztys.jj * this.form_ztys.qdfl;
                        this.form_ztys.cs_lxsm = this.form_ztys.cjmj_lxsm * this.form_ztys.jj * this.form_ztys.smfl;
                        this.form_ztys.cs_lxhj = this.form_ztys.cs_lxqd + this.form_ztys.cs_lxsm;
　　                 },
                    cjzmj_lx(newValue, oldValue) {
                        this.form_ztys.cjzmj_lx = newValue;
                        this.form_ztys.cjmj_lxqd = this.form_ztys.cjzmj_lx * this.form_ztys.cjbl_lxqd / 100;
                        this.form_ztys.cjmj_lxsm = this.form_ztys.cjzmj_lx - this.form_ztys.cjmj_lxqd;
                        this.form_ztys.cs_lxqd = this.form_ztys.cjmj_lxqd * this.form_ztys.jj * this.form_ztys.qdfl;
                        this.form_ztys.cs_lxsm = this.form_ztys.cjmj_lxsm * this.form_ztys.jj * this.form_ztys.smfl;
                        this.form_ztys.cs_lxhj = this.form_ztys.cs_lxqd + this.form_ztys.cs_lxsm;
　　                 },
                    cjbl_zcqd(newValue, oldValue) {
                        this.form_ztys.cjbl_zcqd = newValue;
                        this.form_ztys.cjbl_zcsm = 100 - newValue;
                        this.form_ztys.cjmj_zcqd = this.form_ztys.cjzmj_zc * this.form_ztys.cjbl_zcqd / 100;
                        this.form_ztys.cjmj_zcsm = this.form_ztys.cjzmj_zc - this.form_ztys.cjmj_zcqd;
                        this.form_ztys.cs_zcqd = this.form_ztys.cjmj_zcqd * this.form_ztys.jj * this.form_ztys.qdfl;
                        this.form_ztys.cs_zcsm = this.form_ztys.cjmj_zcsm * this.form_ztys.jj * this.form_ztys.smfl;
                        this.form_ztys.cs_zchj = this.form_ztys.cs_zcqd + this.form_ztys.cs_zcsm;
　　                 },
                    cjzmj_zc(newValue, oldValue) {
                        this.form_ztys.cjzmj_zc = newValue;
                        this.form_ztys.cjmj_zcqd = this.form_ztys.cjzmj_zc * this.form_ztys.cjbl_zcqd / 100;
                        this.form_ztys.cjmj_zcsm = this.form_ztys.cjzmj_zc - this.form_ztys.cjmj_zcqd;
                        this.form_ztys.cs_zcqd = this.form_ztys.cjmj_zcqd * this.form_ztys.jj * this.form_ztys.qdfl;
                        this.form_ztys.cs_zcsm = this.form_ztys.cjmj_zcsm * this.form_ztys.jj * this.form_ztys.smfl;
                        this.form_ztys.cs_zchj = this.form_ztys.cs_zcqd + this.form_ztys.cs_zcsm;
　　                 },
                    cjbl_bsqd(newValue, oldValue) {
                        this.form_ztys.cjbl_bsqd = newValue;
                        this.form_ztys.cjbl_bssm = 100 - newValue;
                        this.form_ztys.cjmj_bsqd = this.form_ztys.cjzmj_bs * this.form_ztys.cjbl_bsqd / 100;
                        this.form_ztys.cjmj_bssm = this.form_ztys.cjzmj_bs - this.form_ztys.cjmj_bsqd;
                        this.form_ztys.cs_bsqd = this.form_ztys.cjmj_bsqd * this.form_ztys.jj * this.form_ztys.qdfl;
                        this.form_ztys.cs_bssm = this.form_ztys.cjmj_bssm * this.form_ztys.jj * this.form_ztys.smfl;
                        this.form_ztys.cs_bshj = this.form_ztys.cs_bsqd + this.form_ztys.cs_bssm; // 等式右边字段没有定义
　　                 },
                    cjzmj_bs(newValue, oldValue) {
                        this.form_ztys.cjzmj_bs = newValue;
                        this.form_ztys.cjmj_bsqd = this.form_ztys.cjzmj_bs * this.form_ztys.cjbl_bsqd / 100;
                        this.form_ztys.cjmj_bssm = this.form_ztys.cjzmj_bs - this.form_ztys.cjmj_bsqd;
                        this.form_ztys.cs_bsqd = this.form_ztys.cjmj_bsqd * this.form_ztys.jj * this.form_ztys.qdfl;
                        this.form_ztys.cs_bssm = this.form_ztys.cjmj_bssm * this.form_ztys.jj * this.form_ztys.smfl;
                        this.form_ztys.cs_bshj = this.form_ztys.cs_bsqd + this.form_ztys.cs_bssm;
　　                 },

                    mj1(newValue, oldValue) {
                        this.form_yfys.mj1 = Number(newValue);
                        console.log(oldValue);
                        this.form_yfys.mjhj=this.form_yfys.mj1+this.form_yfys.mj2+this.form_yfys.mj3+this.form_yfys.mj4+this.form_yfys.mj5+this.form_yfys.mj6+this.form_yfys.mj7+this.form_yfys.mj8+this.form_yfys.mj9+this.form_yfys.mj10+this.form_yfys.mj11+this.form_yfys.mj12;
                        this.form_yfys.cs1 = this.form_yfys.mj1*this.form_yfys.qdfl*this.form_yfys.jj*this.form_yfys.cjbl_qd/100 + this.form_yfys.mj1*this.form_yfys.smfl*this.form_yfys.jj*this.form_yfys.cjbl_sm/100;
                        this.form_yfys.cshj=this.form_yfys.cs1+this.form_yfys.cs2+this.form_yfys.cs3+this.form_yfys.cs4+this.form_yfys.cs5+this.form_yfys.cs6+this.form_yfys.cs7+this.form_yfys.cs8+this.form_yfys.cs9+this.form_yfys.cs10+this.form_yfys.cs11+this.form_yfys.cs12;
　　                 },

                    mj2(newValue, oldValue) {
                        this.form_yfys.mj2 = Number(newValue);
                        this.form_yfys.mjhj=this.form_yfys.mj1+this.form_yfys.mj2+this.form_yfys.mj3+this.form_yfys.mj4+this.form_yfys.mj5+this.form_yfys.mj6+this.form_yfys.mj7+this.form_yfys.mj8+this.form_yfys.mj9+this.form_yfys.mj10+this.form_yfys.mj11+this.form_yfys.mj12;
                        this.form_yfys.cs2 = this.form_yfys.mj2*this.form_yfys.qdfl*this.form_yfys.jj*this.form_yfys.cjbl_qd/100 + this.form_yfys.mj2*this.form_yfys.smfl*this.form_yfys.jj*this.form_yfys.cjbl_sm/100;
                        this.form_yfys.cshj=this.form_yfys.cs1+this.form_yfys.cs2+this.form_yfys.cs3+this.form_yfys.cs4+this.form_yfys.cs5+this.form_yfys.cs6+this.form_yfys.cs7+this.form_yfys.cs8+this.form_yfys.cs9+this.form_yfys.cs10+this.form_yfys.cs11+this.form_yfys.cs12;
　　                 },
                    mj3(newValue, oldValue) {
                        this.form_yfys.mj3 = Number(newValue);
                        this.form_yfys.mjhj=this.form_yfys.mj1+this.form_yfys.mj2+this.form_yfys.mj3+this.form_yfys.mj4+this.form_yfys.mj5+this.form_yfys.mj6+this.form_yfys.mj7+this.form_yfys.mj8+this.form_yfys.mj9+this.form_yfys.mj10+this.form_yfys.mj11+this.form_yfys.mj12;
                        this.form_yfys.cs3 = this.form_yfys.mj3*this.form_yfys.qdfl*this.form_yfys.jj*this.form_yfys.cjbl_qd/100 + this.form_yfys.mj3*this.form_yfys.smfl*this.form_yfys.jj*this.form_yfys.cjbl_sm/100;
                        this.form_yfys.cshj=this.form_yfys.cs1+this.form_yfys.cs2+this.form_yfys.cs3+this.form_yfys.cs4+this.form_yfys.cs5+this.form_yfys.cs6+this.form_yfys.cs7+this.form_yfys.cs8+this.form_yfys.cs9+this.form_yfys.cs10+this.form_yfys.cs11+this.form_yfys.cs12;
　　                 },
                    mj4(newValue, oldValue) {
                        this.form_yfys.mj4 = Number(newValue);
                        this.form_yfys.mjhj=this.form_yfys.mj1+this.form_yfys.mj2+this.form_yfys.mj3+this.form_yfys.mj4+this.form_yfys.mj5+this.form_yfys.mj6+this.form_yfys.mj7+this.form_yfys.mj8+this.form_yfys.mj9+this.form_yfys.mj10+this.form_yfys.mj11+this.form_yfys.mj12;
                        this.form_yfys.cs4 = this.form_yfys.mj4*this.form_yfys.qdfl*this.form_yfys.jj*this.form_yfys.cjbl_qd/100 + this.form_yfys.mj4*this.form_yfys.smfl*this.form_yfys.jj*this.form_yfys.cjbl_sm/100;
                        this.form_yfys.cshj=this.form_yfys.cs1+this.form_yfys.cs2+this.form_yfys.cs3+this.form_yfys.cs4+this.form_yfys.cs5+this.form_yfys.cs6+this.form_yfys.cs7+this.form_yfys.cs8+this.form_yfys.cs9+this.form_yfys.cs10+this.form_yfys.cs11+this.form_yfys.cs12;
　　                 },
                    mj5(newValue, oldValue) {
                        this.form_yfys.mj5 = Number(newValue);
                        this.form_yfys.mjhj=this.form_yfys.mj1+this.form_yfys.mj2+this.form_yfys.mj3+this.form_yfys.mj4+this.form_yfys.mj5+this.form_yfys.mj6+this.form_yfys.mj7+this.form_yfys.mj8+this.form_yfys.mj9+this.form_yfys.mj10+this.form_yfys.mj11+this.form_yfys.mj12;
                        this.form_yfys.cs5 = this.form_yfys.mj5*this.form_yfys.qdfl*this.form_yfys.jj*this.form_yfys.cjbl_qd/100 + this.form_yfys.mj5*this.form_yfys.smfl*this.form_yfys.jj*this.form_yfys.cjbl_sm/100;
                        this.form_yfys.cshj=this.form_yfys.cs1+this.form_yfys.cs2+this.form_yfys.cs3+this.form_yfys.cs4+this.form_yfys.cs5+this.form_yfys.cs6+this.form_yfys.cs7+this.form_yfys.cs8+this.form_yfys.cs9+this.form_yfys.cs10+this.form_yfys.cs11+this.form_yfys.cs12;
　　                 },
                    mj6(newValue, oldValue) {
                        this.form_yfys.mj6 = Number(newValue);
                        this.form_yfys.mjhj=this.form_yfys.mj1+this.form_yfys.mj2+this.form_yfys.mj3+this.form_yfys.mj4+this.form_yfys.mj5+this.form_yfys.mj6+this.form_yfys.mj7+this.form_yfys.mj8+this.form_yfys.mj9+this.form_yfys.mj10+this.form_yfys.mj11+this.form_yfys.mj12;
                        this.form_yfys.cs6 = this.form_yfys.mj6*this.form_yfys.qdfl*this.form_yfys.jj*this.form_yfys.cjbl_qd/100 + this.form_yfys.mj6*this.form_yfys.smfl*this.form_yfys.jj*this.form_yfys.cjbl_sm/100;
                        this.form_yfys.cshj=this.form_yfys.cs1+this.form_yfys.cs2+this.form_yfys.cs3+this.form_yfys.cs4+this.form_yfys.cs5+this.form_yfys.cs6+this.form_yfys.cs7+this.form_yfys.cs8+this.form_yfys.cs9+this.form_yfys.cs10+this.form_yfys.cs11+this.form_yfys.cs12;
　　                 },
                    mj7(newValue, oldValue) {
                        this.form_yfys.mj7 = Number(newValue);
                        this.form_yfys.mjhj=this.form_yfys.mj1+this.form_yfys.mj2+this.form_yfys.mj3+this.form_yfys.mj4+this.form_yfys.mj5+this.form_yfys.mj6+this.form_yfys.mj7+this.form_yfys.mj8+this.form_yfys.mj9+this.form_yfys.mj10+this.form_yfys.mj11+this.form_yfys.mj12;
                        this.form_yfys.cs7 = this.form_yfys.mj7*this.form_yfys.qdfl*this.form_yfys.jj*this.form_yfys.cjbl_qd/100 + this.form_yfys.mj7*this.form_yfys.smfl*this.form_yfys.jj*this.form_yfys.cjbl_sm/100;
                        this.form_yfys.cshj=this.form_yfys.cs1+this.form_yfys.cs2+this.form_yfys.cs3+this.form_yfys.cs4+this.form_yfys.cs5+this.form_yfys.cs6+this.form_yfys.cs7+this.form_yfys.cs8+this.form_yfys.cs9+this.form_yfys.cs10+this.form_yfys.cs11+this.form_yfys.cs12;
　　                 },
                    mj8(newValue, oldValue) {
                        this.form_yfys.mj8 = Number(newValue);
                        this.form_yfys.mjhj=this.form_yfys.mj1+this.form_yfys.mj2+this.form_yfys.mj3+this.form_yfys.mj4+this.form_yfys.mj5+this.form_yfys.mj6+this.form_yfys.mj7+this.form_yfys.mj8+this.form_yfys.mj9+this.form_yfys.mj10+this.form_yfys.mj11+this.form_yfys.mj12;
                        this.form_yfys.cs8 = this.form_yfys.mj8*this.form_yfys.qdfl*this.form_yfys.jj*this.form_yfys.cjbl_qd/100 + this.form_yfys.mj8*this.form_yfys.smfl*this.form_yfys.jj*this.form_yfys.cjbl_sm/100;
                        this.form_yfys.cshj=this.form_yfys.cs1+this.form_yfys.cs2+this.form_yfys.cs3+this.form_yfys.cs4+this.form_yfys.cs5+this.form_yfys.cs6+this.form_yfys.cs7+this.form_yfys.cs8+this.form_yfys.cs9+this.form_yfys.cs10+this.form_yfys.cs11+this.form_yfys.cs12;
　　                 },
                    mj9(newValue, oldValue) {
                        this.form_yfys.mj9 = Number(newValue);
                        this.form_yfys.mjhj=this.form_yfys.mj1+this.form_yfys.mj2+this.form_yfys.mj3+this.form_yfys.mj4+this.form_yfys.mj5+this.form_yfys.mj6+this.form_yfys.mj7+this.form_yfys.mj8+this.form_yfys.mj9+this.form_yfys.mj10+this.form_yfys.mj11+this.form_yfys.mj12;
                        this.form_yfys.cs9 = this.form_yfys.mj9*this.form_yfys.qdfl*this.form_yfys.jj*this.form_yfys.cjbl_qd/100 + this.form_yfys.mj9*this.form_yfys.smfl*this.form_yfys.jj*this.form_yfys.cjbl_sm/100;
                        this.form_yfys.cshj=this.form_yfys.cs1+this.form_yfys.cs2+this.form_yfys.cs3+this.form_yfys.cs4+this.form_yfys.cs5+this.form_yfys.cs6+this.form_yfys.cs7+this.form_yfys.cs8+this.form_yfys.cs9+this.form_yfys.cs10+this.form_yfys.cs11+this.form_yfys.cs12;
　　                 },
                    mj10(newValue, oldValue) {
                        this.form_yfys.mj10 = Number(newValue);
                        this.form_yfys.mjhj=this.form_yfys.mj1+this.form_yfys.mj2+this.form_yfys.mj3+this.form_yfys.mj4+this.form_yfys.mj5+this.form_yfys.mj6+this.form_yfys.mj7+this.form_yfys.mj8+this.form_yfys.mj9+this.form_yfys.mj10+this.form_yfys.mj11+this.form_yfys.mj12;
                        this.form_yfys.cs10 = this.form_yfys.mj10*this.form_yfys.qdfl*this.form_yfys.jj*this.form_yfys.cjbl_qd/100 + this.form_yfys.mj10*this.form_yfys.smfl*this.form_yfys.jj*this.form_yfys.cjbl_sm/100;
                        this.form_yfys.cshj=this.form_yfys.cs1+this.form_yfys.cs2+this.form_yfys.cs3+this.form_yfys.cs4+this.form_yfys.cs5+this.form_yfys.cs6+this.form_yfys.cs7+this.form_yfys.cs8+this.form_yfys.cs9+this.form_yfys.cs10+this.form_yfys.cs11+this.form_yfys.cs12;
　　                 },
                    mj11(newValue, oldValue) {
                        this.form_yfys.mj11 = Number(newValue);
                        this.form_yfys.mjhj=this.form_yfys.mj1+this.form_yfys.mj2+this.form_yfys.mj3+this.form_yfys.mj4+this.form_yfys.mj5+this.form_yfys.mj6+this.form_yfys.mj7+this.form_yfys.mj8+this.form_yfys.mj9+this.form_yfys.mj10+this.form_yfys.mj11+this.form_yfys.mj12;
                        this.form_yfys.cs11 = this.form_yfys.mj11*this.form_yfys.qdfl*this.form_yfys.jj*this.form_yfys.cjbl_qd/100 + this.form_yfys.mj11*this.form_yfys.smfl*this.form_yfys.jj*this.form_yfys.cjbl_sm/100;
                        this.form_yfys.cshj=this.form_yfys.cs1+this.form_yfys.cs2+this.form_yfys.cs3+this.form_yfys.cs4+this.form_yfys.cs5+this.form_yfys.cs6+this.form_yfys.cs7+this.form_yfys.cs8+this.form_yfys.cs9+this.form_yfys.cs10+this.form_yfys.cs11+this.form_yfys.cs12;
　　                 },
                    mj12(newValue, oldValue) {
                        this.form_yfys.mj12 = Number(newValue);
                        this.form_yfys.mjhj=this.form_yfys.mj1+this.form_yfys.mj2+this.form_yfys.mj3+this.form_yfys.mj4+this.form_yfys.mj5+this.form_yfys.mj6+this.form_yfys.mj7+this.form_yfys.mj8+this.form_yfys.mj9+this.form_yfys.mj10+this.form_yfys.mj11+this.form_yfys.mj12;
                        this.form_yfys.cs12 = this.form_yfys.mj12*this.form_yfys.qdfl*this.form_yfys.jj*this.form_yfys.cjbl_qd/100 + this.form_yfys.mj12*this.form_yfys.smfl*this.form_yfys.jj*this.form_yfys.cjbl_sm/100;
                        this.form_yfys.cshj=this.form_yfys.cs1+this.form_yfys.cs2+this.form_yfys.cs3+this.form_yfys.cs4+this.form_yfys.cs5+this.form_yfys.cs6+this.form_yfys.cs7+this.form_yfys.cs8+this.form_yfys.cs9+this.form_yfys.cs10+this.form_yfys.cs11+this.form_yfys.cs12;
　　                 },
                    // form_yfys:{
                    //   handler:function(val,oldval){
                    //     console.log(val.mjhj)
                    //     this.form_yfys.mjhj=this.form_yfys.mj1+this.form_yfys.mj2+this.form_yfys.mj3+this.form_yfys.mj4+this.form_yfys.mj5+this.form_yfys.mj6+this.form_yfys.mj7+this.form_yfys.mj8+this.form_yfys.mj9+this.form_yfys.mj10+this.form_yfys.mj11+this.form_yfys.mj12;
                    //   },
                    //   deep:true//对象内部的属性监听，也叫深度监听
                    // },

                },
                created: function () {
                    this.ins_zttable();
                    this.ins_yftablelx();
                    this.ins_yftablezc();
                    this.ins_hktable();
                },
                methods: {
                    //表格单元格合并的方法
                    arraySpanMethod({ row, column, rowIndex, columnIndex }) {
                    
                        // if (rowIndex % 6 === 0) {
                        //     if (columnIndex === 0) {
                        //         return [6, 1];
                        //     } 
                        // } else {
                        //     if (columnIndex === 0) {
                        //         return [0, 0];
                        //     } 
                        // }
                        if (columnIndex === 0 || columnIndex === 1 || columnIndex === 2 || columnIndex === 8 || columnIndex === 12 || columnIndex === 13) {
                            if (rowIndex % 6 === 0) {
                                return [6, 1];
                            } else{
                                return [0, 0];
                            }
                        }
                        if (columnIndex === 3 || columnIndex === 5 || columnIndex === 11) {
                            if (rowIndex % 2 === 0) {
                                return [2, 1];
                            } else{
                                return [0, 0];
                            }
                        }
                    
                    },
                    //月份预算表格单元格合并的方法
                    arraySpanMethod2({ row, column, rowIndex, columnIndex }) {

                        if (columnIndex === 0) {
                            if (rowIndex % 2 === 0) {
                                return [2, 1];
                            } else{
                                return [0, 0];
                            }
                        }

                        if (columnIndex === 15) {
                            if (rowIndex % 2 === 0) {
                                return [2, 1];
                            } else{
                                return [0, 0];
                            }
                        }
                        
                    },
                    //实时获取项目list选项
                    getPjlist: function(){
                        var that = this;
                        axios.get('/controller.action', {
				        	params: {
				        		name: 'yssysapi',
				        		type: 'ins_pjlist',
				        	}
				        })
				        .then(function (response) {
				        	//that.bindingcode = response.data.binding;
				        	that.pjlist=response.data.data;
				        	//console.log(this.bindingcode);
				        })
				        .catch(function (error) {
				        	console.log(error);
				        });
                    },
                    //新增项目预算
                    addxmys: function(){
                        console.log("addxmys");
                        this.getPjlist();
                        this.dialogFormVisible_addys = true;
                    },
                    addxmztys_close: function(){
                        var that= this;
                        //检查输入是否合法:1.项目是否已经已经存在预算;2.输入数字类型;
                        //1
                        // that.tableData1.forEach(function(item,index){
						//     if(item.pjid==that.form_addys.pjid){
                        //         // that.alerttxt = '项目已经存在预算!';
                        //         // that.alertshow = true;
                        //         that.$message.error('项目已经存在预算!');
						// 	    return;
						//     }
                        // });
                        //foreach循环return还是会继续完成循环,造成弹窗多次, 改用for循环
                        for (let i = 0;i < that.tableData1.length;i++){
                            if(that.tableData1[i].pjid==that.form_addys.pjid){
                                that.$message.error('项目已经存在预算!');
							    return;
						    }
                        }
                        //console.log("还在方法里!");

                        //2
				        var reg = new RegExp("^[0-9]+\\.{0,1}[0-9]*$");

				        
				        if(!reg.test(this.form_addys.syhl))
        		        {
                            that.$message.error('剩余货量必须是数字!');
							return;
                        }
                        
                        if(!reg.test(this.form_addys.jj))
        		        {
                            that.$message.error('均价必须是数字!');
							return;
                        }
                        
                        if(!reg.test(this.form_addys.qdfl))
        		        {
                            that.$message.error('渠道费率必须是数字!');
							return;
                        }
                        
                        if(!reg.test(this.form_addys.smfl))
        		        {
                            that.$message.error('自然上门费率必须是数字!');
							return;
				        }
                        
                        axios.get('/controller.action', {
				        	params: {
				        		name: 'yssysapi',
				        		type: 'add_xmys',
                                parms: that.form_addys,
                                bmysid: that.bmysid,
				        	}
				        })
				        .then(function (response) {
                            that.$message({
                              message: '新增成功,注意编辑补充!',
                              type: 'success'
                            });
                            that.ins_zttable();
                            that.dialogFormVisible_addys = false;
				        })
				        .catch(function (error) {
				        	console.log(error);
                        });
                        
                    },
                    editys: function(row) { //传入scope.row
                        var that = this;
                        this.dialogFormVisible_ztys = true; //弹出对话框
                        //显示加载中,
                        console.log(row.id); //获取id, 根据id去接口调用数据,数据调取完移除加载中
                        // this.form_jsed.jsid = val1;
                        axios.get('/controller.action', {
				        	params: {
				        		name: 'yssysapi',
				        		type: 'ins_edt',
				        		id: row.id,
				        	}
				        })
				        .then(function (response) {
				        	//that.bindingcode = response.data.binding;
				        	that.form_ztys=response.data.data[0];
				        	//console.log(this.bindingcode);
				        })
				        .catch(function (error) {
				        	console.log(error);
				        });
                    
                    },

                    ins_zttable: function() { 
                        console.log("ins_zttable");
                        var that = this;
                        axios.get('/controller.action', {
				        	params: {
				        		name: 'yssysapi',
				        		type: 'ins_tb',
				        		nd: '2020',
				        	}
				        })
				        .then(function (response) {
				        	//that.bindingcode = response.data.binding;
                            that.tableData1=response.data.data;
                            that.bmysid=response.data.message;
                            //console.log(this.bindingcode);
                            that.loading_t1 = false;
				        })
				        .catch(function (error) {
				        	console.log(error);
				        });
                    
                    },

                    ins_yftablelx: function() { 
                        console.log("ins_yftablelx");
                        var that = this;
                        axios.get('/controller.action', {
				        	params: {
				        		name: 'yssysapi',
				        		type: 'ins_yftablelx',
				        		nd: '2020',
				        	}
				        })
				        .then(function (response) {
				        	//that.bindingcode = response.data.binding;
                            that.tableData2=response.data.data;
                            that.bmysid=response.data.message;
                            //console.log(this.bindingcode);
                            that.loading_t2 = false;
				        })
				        .catch(function (error) {
				        	console.log(error);
				        });
                    
                    },

                    ins_yftablezc: function() { 
                        console.log("ins_yftablezc");
                        var that = this;
                        axios.get('/controller.action', {
				        	params: {
				        		name: 'yssysapi',
				        		type: 'ins_yftablezc',
				        		nd: '2020',
				        	}
				        })
				        .then(function (response) {
				        	//that.bindingcode = response.data.binding;
                            that.tableData3=response.data.data;
                            that.bmysid=response.data.message;
                            //console.log(this.bindingcode);
                            that.loading_t3 = false;
				        })
				        .catch(function (error) {
				        	console.log(error);
				        });
                    
                    },
                    
                    updxmztys: function(){
                        var that= this;
                        dialogFormVisible_ztys = false;
                        var str0 =JSON.stringify(this.form_ztys);
                        var params = new URLSearchParams();
                        params.append('ztys', encodeURI(str0));
                        axios({
                            url:'/customize/page/9291p1140/yssysapi.jsp?name=yssysapi&type=upd_ztxmys',
                            method: 'post',
                            data: params,
                            headers: {
                                'Content-type': 'application/x-www-form-urlencoded'
                            }
                        })
                        .then(function (response) {
                            that.$message({
                              message: '更新成功!',
                              type: 'success'
                            });
                            that.ins_zttable();
                        })
                        .catch(function (error) {
                            console.log(error);
                        });
                    },
                
                    handleClickTab(tab, event) {
                        console.log(tab, event);
                        console.log(tab.label);
                        if(tab.label=='季度考核'&&this.loading_jd){
		            		//alert(this.jsrq_bd);
		            		var that = this;
                        
		            	}
                    },

                    ins_edtyfys: function(row,valtype) { //传入scope.row
                        var that = this;
                        that.valtype=valtype;
                        console.log(valtype);
                        this.dialogFormVisible_yfys = true; //弹出对话框
                        //显示加载中,
                        console.log(row.id); //获取id, 根据id去接口调用数据,数据调取完移除加载中
                        // this.form_jsed.jsid = val1;
                        axios.get('/controller.action', {
				        	params: {
				        		name: 'yssysapi',
                                type: 'ins_edtyfys',
                                valtype: valtype,
				        		id: row.id,
				        	}
				        })
				        .then(function (response) {
				        	//that.bindingcode = response.data.binding;
				        	that.form_yfys=response.data.data;
				        	//console.log(that.form_yfys.pjnm);
				        })
				        .catch(function (error) {
				        	console.log(error);
				        });
                    
                    },

                    updxmyfys: function(){
                        var that = this;
                        that.dialogFormVisible_yfys = false;
                        var str0 =JSON.stringify(this.form_yfys);
                        var params = new URLSearchParams();
                        params.append('yfys', encodeURI(str0));
                        params.append('valtype', that.valtype);
                        axios({
                            url:'/customize/page/9291p1140/yssysapi.jsp?name=yssysapi&type=upd_yfxmys',
                            method: 'post',
                            data: params,
                            headers: {
                                'Content-type': 'application/x-www-form-urlencoded'
                            }
                        })
                        .then(function (response) {
                            that.$message({
                              message: '更新成功!',
                              type: 'success'
                            });
                            if(that.valtype=='lx'){
                                that.ins_yftablelx();
                            }else if(that.valtype=='zc'){
                                that.ins_yftablezc();
                            }
                        })
                        .catch(function (error) {
                            console.log(error);
                        });
                    },

                    ins_hktable: function() { 
                        console.log("ins_hktable");
                        var that = this;
                        axios.get('/controller.action', {
				        	params: {
				        		name: 'yssysapi',
				        		type: 'ins_hktable',
				        		nd: 2020,
				        	}
				        })
				        .then(function (response) {
				        	//that.bindingcode = response.data.binding;
                            that.tableData4=response.data.data;
                            that.bmysid=response.data.message;
                            //console.log(this.bindingcode);
                            that.loading_t4 = false;
				        })
				        .catch(function (error) {
				        	console.log(error);
				        });
                    
                    },
                },
                computed:{
                    cjzmj_lx() {
                        return this.form_ztys.cjzmj_lx
                    },
                    cjbl_lxqd() {
　　            　      return this.form_ztys.cjbl_lxqd
　　                },
                    cjzmj_zc() {
                        return this.form_ztys.cjzmj_zc
                    },
                    cjbl_zcqd() {
　　            　      return this.form_ztys.cjbl_zcqd
　　                },
                    cjzmj_bs() {
                        return this.form_ztys.cjzmj_bs
                    },
                    cjbl_bsqd() {
　　            　      return this.form_ztys.cjbl_bsqd
　　                },
                    mj1() {
                        return this.form_yfys.mj1
                    },
                    mj2() {
                        return this.form_yfys.mj2
                    },
                    mj3() {
                        return this.form_yfys.mj3
                    },
                    mj4() {
                        return this.form_yfys.mj4
                    },
                    mj5() {
                        return this.form_yfys.mj5
                    },
                    mj6() {
                        return this.form_yfys.mj6
                    },
                    mj7() {
                        return this.form_yfys.mj7
                    },
                    mj8() {
                        return this.form_yfys.mj8
                    },
                    mj9() {
                        return this.form_yfys.mj9
                    },
                    mj10() {
                        return this.form_yfys.mj10
                    },
                    mj11() {
                        return this.form_yfys.mj11
                    },
                    mj12() {
                        return this.form_yfys.mj12
                    },
                }
            });
    </script>
</html>
